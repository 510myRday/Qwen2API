import{_ as $,r as d,o as z,c as r,a as e,b as S,d as y,e as h,w,f as V,F as M,g as j,h as I,n as k,T as B,i as x,j as n,t as g,k as v,v as m}from"./index-C4OuYOZ3.js";const D={class:"w-full min-h-screen p-4"},E={class:"container mx-auto"},K={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 px-4 space-y-4 md:space-y-0 pt-5"},N={class:"flex flex-col sm:flex-row w-full md:w-auto space-y-3 sm:space-y-0 sm:space-x-4"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4"},U={class:"relative p-6 flex flex-col gap-4"},F={class:"flex flex-col space-y-3"},P={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},q={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},G={class:"font-medium whitespace-nowrap text-left"},H=["onClick"],J={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},O={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},Q={class:"font-medium whitespace-nowrap text-left"},R=["onClick"],W={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},X={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},Y={class:"font-medium whitespace-nowrap text-left text-sm"},Z=["onClick"],ee={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},te={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},oe={class:"font-medium whitespace-nowrap text-left"},se=["onClick"],ae={class:"pt-4 mt-auto border-t border-gray-200/50"},le=["onClick"],re={class:"relative bg-white/80 backdrop-blur-lg rounded-2xl p-6 w-11/12 max-w-md transform transition-all duration-300 scale-100 opacity-100"},ne={class:"flex mb-6 border-b border-gray-200"},ie={key:"single"},de={class:"space-y-4"},ce={class:"flex justify-end space-x-4 pt-4"},ue={key:"batch"},be={class:"space-y-4"},pe={class:"flex justify-end space-x-4 pt-4"},xe={__name:"dashboard",setup(ge){const f=d([]),a=d(!1),i=d("single"),l=d({email:"",password:""}),c=d(""),u=async s=>{try{await navigator.clipboard.writeText(s),alert("已复制到剪贴板")}catch(t){console.error("复制失败:",t)}},b=async()=>{try{const s=await x.get("/api/getAllAccounts",{headers:{Authorization:localStorage.getItem("apiKey")||""}});f.value=s.data.data}catch(s){console.error("获取Token列表失败:",s),alert("获取Token列表失败: "+s.message)}},_=async()=>{try{await x.post("/api/setAccount",l.value,{headers:{Authorization:localStorage.getItem("apiKey")||""}}),a.value=!1,l.value={email:"",password:""},await b(),alert("添加账号成功")}catch(s){console.error("添加账号失败:",s),alert("添加账号失败: "+s.message)}},C=async()=>{try{await x.post("/api/setAccounts",{accounts:c.value},{headers:{Authorization:localStorage.getItem("apiKey")||""}}),a.value=!1,c.value="",await b(),alert("批量添加任务已提交")}catch(s){console.error("批量添加失败:",s),alert("批量添加失败: "+s.message)}},T=async s=>{if(confirm("确定要删除此账号吗？"))try{await x.delete("/api/deleteAccount",{data:{email:s},headers:{Authorization:localStorage.getItem("apiKey")||""}}),await b(),alert("删除账号成功")}catch(t){console.error("删除账号失败:",t),alert("删除账号失败: "+t.message)}};return z(()=>{b()}),(s,t)=>{const A=V("router-link");return n(),r("div",D,[e("div",E,[e("div",K,[t[10]||(t[10]=e("h1",{class:"text-4xl font-bold"},[y("Token Manager "),e("span",{class:"text-gray-500 text-sm"},"by 兜豆子")],-1)),e("div",N,[e("button",{onClick:t[0]||(t[0]=o=>a.value=!0),class:"action-button font-bold border border-green-200 bg-green-50 text-green-900 px-4 py-2 rounded-xl shadow-sm hover:bg-green-100 hover:border-green-400 transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0"}," 添加账号 "),h(A,{to:"/settings",class:"action-button font-bold border border-blue-200 bg-blue-50 text-blue-900 px-4 py-2 rounded-xl shadow-sm hover:bg-blue-100 hover:border-blue-400 transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0 text-center"},{default:w(()=>t[9]||(t[9]=[y(" 系统设置 ")])),_:1})])]),e("div",L,[(n(!0),r(M,null,j(f.value,o=>(n(),r("div",{key:o.email,class:"token-card group relative overflow-hidden rounded-2xl transition-all duration-300 hover:shadow-2xl"},[t[15]||(t[15]=e("div",{class:"absolute inset-0 bg-white/30 backdrop-blur-md border border-white/30"},null,-1)),e("div",U,[e("div",F,[e("div",P,[e("div",q,[t[11]||(t[11]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"📧 Email:",-1)),e("span",G,g(o.email),1)]),e("button",{onClick:p=>u(o.email),class:"absolute right-2 opacity-60 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,H)]),e("div",J,[e("div",O,[t[12]||(t[12]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"🔑 Passwd:",-1)),e("span",Q,g(o.password),1)]),e("button",{onClick:p=>u(o.password),class:"absolute right-2 opacity-60 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,R)]),e("div",W,[e("div",X,[t[13]||(t[13]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"🔐 Token:",-1)),e("span",Y,g(o.token),1)]),e("button",{onClick:p=>u(o.token),class:"absolute right-2 opacity-60 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,Z)]),e("div",ee,[e("div",te,[t[14]||(t[14]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"⏰ Expire:",-1)),e("span",oe,g(new Date(o.expires*1e3).toLocaleString()),1)]),e("button",{onClick:p=>u(new Date(o.expires*1e3).toLocaleString()),class:"absolute right-2 opacity-60 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,se)])]),e("div",ae,[e("button",{onClick:p=>T(o.email),class:"w-full group-hover:bg-red-50 text-red-600 py-2 rounded-lg transition-all duration-300 hover:bg-red-100"}," 删除账号 ",8,le)])])]))),128))])]),a.value?(n(),r("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t[8]||(t[8]=I(o=>a.value=!1,["self"]))},[e("div",re,[e("div",ne,[e("button",{class:k(["flex-1 py-2 font-bold transition-all rounded-t-xl duration-300",i.value==="single"?"text-gray-600 border-b-2 border-gray-500 bg-gray-50/60":"text-gray-500 bg-transparent"]),onClick:t[1]||(t[1]=o=>i.value="single")},"单账号添加",2),e("button",{class:k(["flex-1 py-2 font-bold transition-all rounded-t-xl duration-300",i.value==="batch"?"text-gray-600 border-b-2 border-gray-500 bg-gray-50/60":"text-gray-500 bg-transparent"]),onClick:t[2]||(t[2]=o=>i.value="batch")},"批量添加",2)]),h(B,{name:"fade",mode:"out-in"},{default:w(()=>[i.value==="single"?(n(),r("div",ie,[t[18]||(t[18]=e("h2",{class:"text-xl font-bold mb-4"},"添加账号",-1)),e("div",de,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.email=o),type:"email",class:"mt-1 block w-full rounded-xl border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300 h-12 text-base px-4"},null,512),[[m,l.value.email]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Password",-1)),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.password=o),type:"password",class:"mt-1 block w-full rounded-xl border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300 h-12 text-base px-4"},null,512),[[m,l.value.password]])]),e("div",ce,[e("button",{onClick:t[5]||(t[5]=o=>a.value=!1),class:"px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all duration-300"}," 取消 "),e("button",{onClick:_,class:"px-4 py-2 rounded-xl bg-black text-white hover:bg-white hover:text-black transition-all duration-300"}," 添加 ")])])])):(n(),r("div",ue,[t[20]||(t[20]=e("h2",{class:"text-xl font-bold mb-4 px-4"},"批量添加账号",-1)),e("div",be,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 px-4 pb-2"},"账号列表（每行一个，格式：email:password）",-1)),v(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>c.value=o),rows:"6",class:"mt-1 block w-full rounded-xl border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300 h-36 text-base px-4 py-3 resize-none"},null,512),[[m,c.value]])]),e("div",pe,[e("button",{onClick:t[7]||(t[7]=o=>a.value=!1),class:"px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all duration-300"}," 取消 "),e("button",{onClick:C,class:"px-4 py-2 rounded-xl bg-black text-white hover:bg-white hover:text-black transition-all duration-300"}," 批量添加 ")])])]))]),_:1})])])):S("",!0)])}}},me=$(xe,[["__scopeId","data-v-f6cc1d36"]]);export{me as default};
