import{_ as J,r,c as j,o as Q,a as i,b as e,d as B,e as z,f as I,w as L,g as W,h as x,v as X,t as d,n as y,i as Y,j as U,F as Z,k as ee,l as K,T as te,m,p as u,q as V}from"./index-BZj-RYXu.js";const oe={class:"w-100vw h-100vh p-4 overflow-y-auto"},le={class:"container mx-auto"},se={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 px-4 space-y-4 md:space-y-0 pt-5"},ae={class:"flex flex-col sm:flex-row w-full md:w-auto space-y-3 sm:space-y-0 sm:space-x-4"},re={class:"flex justify-between items-center px-4 mb-4"},ne={class:"flex items-center space-x-2"},ie={class:"flex space-x-2 items-center"},de={class:"text-gray-700"},ue=["disabled"],ce={class:"text-gray-700"},be=["disabled"],pe={class:"flex justify-between items-center px-4 mb-4"},ve={class:"flex items-center space-x-3"},ge={class:"inline-flex items-center cursor-pointer group"},xe={class:"relative"},me={class:"w-6 h-6 bg-white border-2 border-gray-300 rounded-lg peer-checked:bg-indigo-500 peer-checked:border-indigo-500 transition-all duration-300 flex items-center justify-center"},fe={class:"w-4 h-4 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},he=["disabled"],ye={class:"max-h-[calc(75vh)] overflow-y-auto pr-2"},we={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4"},ke={class:"absolute top-3 left-3 z-10"},_e={class:"custom-checkbox cursor-pointer"},Ce=["checked","onChange"],Ae={class:"checkbox-icon w-6 h-6 bg-white/70 backdrop-blur-sm border-2 border-gray-300 rounded-lg peer-checked:bg-indigo-500 peer-checked:border-indigo-500 transition-all duration-300 flex items-center justify-center shadow-sm hover:shadow"},ze={class:"w-4 h-4 text-white transform scale-0 peer-checked:scale-100 transition-transform duration-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},Se={class:"relative p-6 flex flex-col gap-4"},$e={class:"flex flex-col space-y-3"},Te={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},je={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},Ve={class:"font-medium whitespace-nowrap text-left"},Me=["onClick"],Pe={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},Be={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},Ie={class:"font-medium whitespace-nowrap text-left"},Le=["onClick"],Ue={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},Ke={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},De={class:"font-medium whitespace-nowrap text-left text-sm"},Ee=["onClick"],Re={class:"relative flex items-center bg-blue-50/80 rounded-lg px-2 py-1"},He={class:"overflow-x-auto scrollbar-hide flex-1 flex items-center space-x-2"},Ne={class:"font-medium whitespace-nowrap text-left"},Oe=["onClick"],qe={class:"pt-4 mt-auto border-t border-gray-200/50"},Fe=["onClick"],Ge={class:"relative bg-white/90 backdrop-blur-lg rounded-2xl p-6 w-11/12 max-w-md transform transition-all duration-300 scale-100 opacity-100"},Je={class:"text-gray-700 mb-6"},Qe={class:"font-bold"},We={class:"flex justify-end space-x-4"},Xe={class:"relative bg-white/80 backdrop-blur-lg rounded-2xl p-6 w-11/12 max-w-md transform transition-all duration-300 scale-100 opacity-100"},Ye={class:"flex mb-6 border-b border-gray-200"},Ze={key:"single"},et={class:"space-y-4"},tt={class:"flex justify-end space-x-4 pt-4"},ot={key:"batch"},lt={class:"space-y-4"},st={class:"flex justify-end space-x-4 pt-4"},at={__name:"dashboard",setup(rt){const M=r([]),v=r(!1),w=r("single"),f=r({email:"",password:""}),_=r(""),n=r([]),a=r(1),c=r(20),S=j(()=>n.value.length),h=j(()=>Math.max(1,Math.ceil(S.value/c.value))),s=r([]),b=r(!1),k=r(!1),$=o=>s.value.includes(o),D=o=>{const t=s.value.indexOf(o);t===-1?s.value.push(o):s.value.splice(t,1),b.value=s.value.length===T.value.length},E=()=>{b.value?s.value=T.value.map(o=>o.email):s.value=[]},R=async()=>{if(s.value.length!==0&&confirm(`确定要删除选中的 ${s.value.length} 个账号吗？`))try{const o=s.value.map(t=>m.delete("/api/deleteAccount",{data:{email:t},headers:{Authorization:localStorage.getItem("apiKey")||""}}));await Promise.all(o),await g(),s.value=[],b.value=!1,alert("删除成功")}catch(o){console.error("批量删除失败:",o),alert("批量删除失败: "+o.message)}},H=async()=>{try{const o=n.value.map(t=>m.delete("/api/deleteAccount",{data:{email:t.email},headers:{Authorization:localStorage.getItem("apiKey")||""}}));await Promise.all(o),k.value=!1,await g(),s.value=[],b.value=!1,alert("所有账号已删除")}catch(o){console.error("删除所有账号失败:",o),alert("删除所有账号失败: "+o.message)}},T=j(()=>{const o=(a.value-1)*c.value,t=o+c.value;return n.value.slice(o,t)}),P=o=>{o>=1&&o<=h.value&&(a.value=o,s.value=[],b.value=!1)},N=()=>{a.value=1,c.value>=1e3?M.value=n.value:g()},C=async o=>{try{await navigator.clipboard.writeText(o),alert("已复制到剪贴板")}catch(t){console.error("复制失败:",t)}},g=async()=>{try{const o=await m.get("/api/getAllAccounts",{params:{page:a.value,pageSize:c.value},headers:{Authorization:localStorage.getItem("apiKey")||""}});if(c.value>=1e3)n.value=o.data.data;else if(M.value=o.data.data,n.value.length===0){const t=await m.get("/api/getAllAccounts",{params:{page:1,pageSize:1e3},headers:{Authorization:localStorage.getItem("apiKey")||""}});n.value=t.data.data}}catch(o){console.error("获取Token列表失败:",o),alert("获取Token列表失败: "+o.message)}},O=async()=>{try{await m.post("/api/setAccount",f.value,{headers:{Authorization:localStorage.getItem("apiKey")||""}}),v.value=!1,f.value={email:"",password:""},await g(),alert("添加账号成功")}catch(o){console.error("添加账号失败:",o),alert("添加账号失败: "+o.message)}},q=async()=>{try{await m.post("/api/setAccounts",{accounts:_.value},{headers:{Authorization:localStorage.getItem("apiKey")||""}}),v.value=!1,_.value="",await g(),alert("批量添加任务已提交")}catch(o){console.error("批量添加失败:",o),alert("批量添加失败: "+o.message)}},F=async o=>{if(confirm("确定要删除此账号吗？"))try{await m.delete("/api/deleteAccount",{data:{email:o},headers:{Authorization:localStorage.getItem("apiKey")||""}}),await g(),alert("删除账号成功")}catch(t){console.error("删除账号失败:",t),alert("删除账号失败: "+t.message)}},G=()=>{if(n.value.length===0){alert("没有可导出的账号");return}const o=n.value.map(p=>`${p.email}:${p.password}`).join(`
`),t=new Blob([o],{type:"text/plain;charset=utf-8"}),A=URL.createObjectURL(t),l=document.createElement("a");l.href=A,l.download="qwen_accounts.txt",document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(A)},100),alert("导出完成")};return Q(()=>{g()}),(o,t)=>{const A=W("router-link");return u(),i("div",oe,[e("div",le,[e("div",se,[t[17]||(t[17]=e("h1",{class:"text-4xl font-bold"},[z("Token Manager "),e("span",{class:"text-gray-500 text-sm"},"by 兜豆子")],-1)),e("div",ae,[e("button",{onClick:t[0]||(t[0]=l=>v.value=!0),class:"action-button font-bold border border-green-200 bg-green-50 text-green-900 px-4 py-2 rounded-xl shadow-sm hover:bg-green-100 hover:border-green-400 transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0"}," 添加账号 "),e("button",{onClick:G,class:"action-button font-bold border border-yellow-200 bg-yellow-50 text-yellow-900 px-4 py-2 rounded-xl shadow-sm hover:bg-yellow-100 hover:border-yellow-400 transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0"}," 导出账号 "),I(A,{to:"/settings",class:"action-button font-bold border border-blue-200 bg-blue-50 text-blue-900 px-4 py-2 rounded-xl shadow-sm hover:bg-blue-100 hover:border-blue-400 transition-all duration-300 transform hover:-translate-y-1 active:translate-y-0 text-center"},{default:L(()=>t[16]||(t[16]=[z(" 系统设置 ")])),_:1})])]),e("div",re,[e("div",ne,[t[19]||(t[19]=e("span",{class:"text-gray-700"},"每页显示:",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>c.value=l),onChange:N,class:"rounded-lg border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300"},t[18]||(t[18]=[e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:1e3},"全部",-1)]),544),[[X,c.value]])]),e("div",ie,[e("span",de,"共 "+d(S.value)+" 项",1),e("button",{onClick:t[2]||(t[2]=l=>P(a.value-1)),disabled:a.value===1,class:y(["px-3 py-1 rounded-lg transition-all duration-300",a.value===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-700 hover:bg-blue-100"])}," 上一页 ",10,ue),e("span",ce,d(a.value)+"/"+d(h.value),1),e("button",{onClick:t[3]||(t[3]=l=>P(a.value+1)),disabled:a.value===h.value||h.value===0,class:y(["px-3 py-1 rounded-lg transition-all duration-300",a.value===h.value||h.value===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 text-blue-700 hover:bg-blue-100"])}," 下一页 ",10,be)])]),e("div",pe,[e("div",ve,[e("label",ge,[e("div",xe,[x(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>b.value=l),onChange:E,class:"sr-only peer"},null,544),[[Y,b.value]]),e("div",me,[x((u(),i("svg",fe,t[20]||(t[20]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)]),512)),[[U,b.value]])])]),t[21]||(t[21]=e("span",{class:"ml-2 text-gray-700 group-hover:text-indigo-700 transition-colors duration-200"},"全选",-1))]),e("button",{onClick:R,disabled:s.value.length===0,class:y(["px-4 py-1.5 rounded-lg transition-all duration-300 border flex items-center space-x-1",s.value.length===0?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"bg-red-50 text-red-600 border-red-200 hover:bg-red-100"])},[t[22]||(t[22]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",null,"删除选中 ("+d(s.value.length)+")",1)],10,he)]),e("button",{onClick:t[5]||(t[5]=l=>k.value=!0),class:"px-4 py-1.5 rounded-lg border border-red-300 bg-red-50 text-red-700 hover:bg-red-100 transition-all duration-300 flex items-center space-x-1"},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",null,"删除全部账号",-1)]))]),e("div",ye,[e("div",we,[(u(!0),i(Z,null,ee(T.value,l=>(u(),i("div",{key:l.email,class:y(["token-card group relative overflow-hidden rounded-2xl transition-all duration-300 hover:shadow-2xl pt-4",{"ring-2 ring-indigo-500 ring-opacity-75":$(l.email)}])},[e("div",ke,[e("label",_e,[e("input",{type:"checkbox",checked:$(l.email),onChange:p=>D(l.email),class:"sr-only peer"},null,40,Ce),e("div",Ae,[x((u(),i("svg",ze,t[24]||(t[24]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)]),512)),[[U,$(l.email)]])])])]),t[29]||(t[29]=e("div",{class:"absolute inset-0 bg-white/30 backdrop-blur-md border border-white/30"},null,-1)),e("div",Se,[e("div",$e,[e("div",Te,[e("div",je,[t[25]||(t[25]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"📧 Email:",-1)),e("span",Ve,d(l.email),1)]),e("button",{onClick:p=>C(l.email),class:"absolute right-2 opacity-0 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,Me)]),e("div",Pe,[e("div",Be,[t[26]||(t[26]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"🔑 Passwd:",-1)),e("span",Ie,d(l.password),1)]),e("button",{onClick:p=>C(l.password),class:"absolute right-2 opacity-0 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,Le)]),e("div",Ue,[e("div",Ke,[t[27]||(t[27]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"🔐 Token:",-1)),e("span",De,d(l.token),1)]),e("button",{onClick:p=>C(l.token),class:"absolute right-2 opacity-0 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,Ee)]),e("div",Re,[e("div",He,[t[28]||(t[28]=e("span",{class:"text-gray-700 min-w-[96px] text-left font-semibold"},"⏰ Expire:",-1)),e("span",Ne,d(new Date(l.expires*1e3).toLocaleString()),1)]),e("button",{onClick:p=>C(new Date(l.expires*1e3).toLocaleString()),class:"absolute right-2 opacity-0 hover:opacity-100 transition-opacity bg-blue-200 hover:bg-blue-300 rounded px-2 py-1 text-base"},"📋",8,Oe)])]),e("div",qe,[e("button",{onClick:p=>F(l.email),class:"w-full group-hover:bg-red-50 text-red-600 py-2 rounded-lg transition-all duration-300 hover:bg-red-100"}," 删除账号 ",8,Fe)])])],2))),128))])])]),k.value?(u(),i("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t[7]||(t[7]=K(l=>k.value=!1,["self"]))},[e("div",Ge,[t[32]||(t[32]=e("h2",{class:"text-2xl font-bold text-red-600 mb-4"},"⚠️ 危险操作",-1)),e("p",Je,[t[30]||(t[30]=z("您确定要删除")),e("span",Qe,"全部 "+d(S.value)+" 个",1),t[31]||(t[31]=z("账号吗？此操作不可恢复！"))]),e("div",We,[e("button",{onClick:t[6]||(t[6]=l=>k.value=!1),class:"px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all duration-300"}," 取消 "),e("button",{onClick:H,class:"px-4 py-2 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all duration-300"}," 确认删除 ")])])])):B("",!0),v.value?(u(),i("div",{key:1,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:t[15]||(t[15]=K(l=>v.value=!1,["self"]))},[e("div",Xe,[e("div",Ye,[e("button",{class:y(["flex-1 py-2 font-bold transition-all rounded-t-xl duration-300",w.value==="single"?"text-gray-600 border-b-2 border-gray-500 bg-gray-50/60":"text-gray-500 bg-transparent"]),onClick:t[8]||(t[8]=l=>w.value="single")},"单账号添加",2),e("button",{class:y(["flex-1 py-2 font-bold transition-all rounded-t-xl duration-300",w.value==="batch"?"text-gray-600 border-b-2 border-gray-500 bg-gray-50/60":"text-gray-500 bg-transparent"]),onClick:t[9]||(t[9]=l=>w.value="batch")},"批量添加",2)]),I(te,{name:"fade",mode:"out-in"},{default:L(()=>[w.value==="single"?(u(),i("div",Ze,[t[35]||(t[35]=e("h2",{class:"text-xl font-bold mb-4"},"添加账号",-1)),e("div",et,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),x(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>f.value.email=l),type:"email",class:"mt-1 block w-full rounded-xl border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300 h-12 text-base px-4"},null,512),[[V,f.value.email]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"Password",-1)),x(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>f.value.password=l),type:"password",class:"mt-1 block w-full rounded-xl border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300 h-12 text-base px-4"},null,512),[[V,f.value.password]])]),e("div",tt,[e("button",{onClick:t[12]||(t[12]=l=>v.value=!1),class:"px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all duration-300"}," 取消 "),e("button",{onClick:O,class:"px-4 py-2 rounded-xl bg-black text-white hover:bg-white hover:text-black transition-all duration-300"}," 添加 ")])])])):(u(),i("div",ot,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4 px-4"},"批量添加账号",-1)),e("div",lt,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 px-4 pb-2"},"账号列表（每行一个，格式：email:password）",-1)),x(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=l=>_.value=l),rows:"6",class:"mt-1 block w-full rounded-xl border-gray-300 bg-white/50 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-all duration-300 h-36 text-base px-4 py-3 resize-none"},null,512),[[V,_.value]])]),e("div",st,[e("button",{onClick:t[14]||(t[14]=l=>v.value=!1),class:"px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-all duration-300"}," 取消 "),e("button",{onClick:q,class:"px-4 py-2 rounded-xl bg-black text-white hover:bg-white hover:text-black transition-all duration-300"}," 批量添加 ")])])]))]),_:1})])])):B("",!0)])}}},it=J(at,[["__scopeId","data-v-3630b2be"]]);export{it as default};
